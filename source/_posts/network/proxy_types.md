---
title:  "Proxy Types"
date:   2020-09-09
categories: Network
---

## 分类

1. 正向代理(Forward Proxy)
2. 反向代理(Reverse Proxy)
3. 透明代理(Transparent Proxy)

## 区别

1. 正向代理

    客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理向目标服务器转交并且将获得的内容返回给客户端。

2. 反向代理

    客户端向反向代理发送请求，接着反向代理判断请求走向何处，并将请求转交给客户端，使得这些内容就好似他自己一样，一次客户端并不会感知到反向代理后面的服务，也因此不需要客户端做任何设置，只需要把反向代理服务器当成真正的服务器就好了。

3. 透明代理

    透明代理比较类似正向代理的功能，差别在于客户端根本不知道代理的存在，它改编你的request，并会传送真实IP（使用场景就是公司限制网络的访问）。

## 使用场景

1. 正向代理

   * cross firewall
  
    ![cross firewall](/images/forward_proxy_cross_firewall.webp)

    用户A无法访问`wwww.google.com`，但是能访问服务器B，而服务器B可以访问google。于是用户A访问服务器B，通过服务器B去访问google，服务器B收到请求后，去访问google，google把响应信息返回给服务器B，服务器B再把响应信息返回给A。

2. 反向代理

   * 负载均衡

    ![负载均衡](/images/reverse_proxy_payload_balance.webp)

    当反向代理服务器不止一个的时候，我们甚至可以把它们做成集群，当更多的用户访问资源服务器B的时候，让不同的代理服务器Z（x）去应答不同的用户，然后发送不同用户需要的资源。

   * 保护和隐藏原始资源服务器

    ![保护和隐藏原始资源服务器](/images/reverse_proxy_hide_original_server.webp)

    用户A始终认为它访问的是原始服务器B而不是代理服务器Z，但实用际上反向代理服务器接受用户A的应答，从原始资源服务器B中取得用户A的需求资源，然后发送给用户A。由于防火墙的作用，只允许代理服务器Z访问原始资源服务器B。尽管在这个虚拟的环境下，防火墙和反向代理的共同作用保护了原始资源服务器B，但用户A并不知情。

   * 加密和SSL加速
   * 缓存静态内容
   * 压缩
   * 减速上传
   * 安全
   * 外网发布

3. 透明代理

    比如为了工作效率或者安全，A公司屏蔽了QQ软件的使用。A公司的员工接上了网络，但发现无法使用qq。这就是透明代理捣的鬼。公司在内网和外网的中间插入一个透明代理，这个代理会根据规则抓取请求内容，遇到qq的请求我就把这个请求给屏蔽掉，这样就完成了透明屏蔽。当然了，如果你明白原理，就可以自己搞个正向代理来绕过公司的屏蔽。

## 参考链接

1. [正向代理与反向代理有什么区别](https://mp.weixin.qq.com/s/ikrI3rmSYs83wdSWqq2QIg)

2. [正向代理和反向代理的区别](https://www.tuicool.com/articles/M7bAnqy)